{% extends 'main/base.html' %}
{% load static %}

{% block content %}
<div class="container">
    <h1>{{ category.name }}</h1>
    <p>{{ category.description }}</p>
    <a href="{% url 'download_category_archive' category.id %}" class="btn btn-download">Скачать архив категории</a>

    <div class="documents-list">
        {% for document in documents %}
        <div class="document-card">
            <h3>{{ document.title }}</h3>
            <p>{{ document.content|truncatechars:100 }}</p>
            <div class="document-meta">
                <span>Статус: {{ document.get_status_display }}</span>
                <span>Создан: {{ document.created_at|date:"d.m.Y" }}</span>
            </div>
            <div class="document-actions">
                <a href="{% url 'document_detail' document.id %}" class="btn btn-primary">Просмотреть</a>
                {% if document.file %}
                <a href="{{ document.file.url }}" class="btn btn-secondary" download>Скачать</a>
                {% endif %}
            </div>
        </div>
        {% empty %}
        <p>В этой категории нет документов.</p>
        {% endfor %}
    </div>
</div>

<style>
.documents-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 30px;
}

.document-card {
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 20px;
    background: #fff;
}

.document-meta {
    margin: 10px 0;
    font-size: 0.9em;
    color: #666;
}

.document-actions {
    margin-top: 15px;
}

.btn {
    display: inline-block;
    padding: 8px 16px;
    margin-right: 10px;
    text-decoration: none;
    border-radius: 4px;
}

.btn-primary {
    background: #007bff;
    color: white;
}

.btn-download {
    background: #28a745;
    color: white;
    margin-bottom: 20px;
    display: inline-block;
}
</style>
{% endblock %}